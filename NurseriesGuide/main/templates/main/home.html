{% extends "main/base.html" %}

{% load static %}

{% block title %}دليل الحضانات{% endblock %}

{% block hero %}

<style>
  .rounded-card {
      border-radius: 1.5rem;
      overflow: hidden;
  }
  .card-body {
      background-color: #FFF3F4;
  }

  h1, h3, h4 ,h5,a{
      color:#12275A
  }
  a{
      text-decoration: none;
  }
  .gallery-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: start;
  }
  .gallery-item {
      width: 100%;
      padding: 5px;
      box-sizing: border-box;
  }
  .responsive-img {
      width: 100%;
      height: 100px;
      object-fit: cover;
  }
</style>


<section class="hero-section">
  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner">
          <div class="carousel-item active">
              <div class="hero-image d-block w-100" style="background-image: url('your-image-1.jpg'); height: 100vh; background-size: cover;">
                  <div class="overlay">
                      <div class="hero-content text-center">
                          <h1>انضم إلينا</h1>
                          <div class="mt-3">
                              <button class="btn btn-primary">سجل كولي امر</button>
                              <button class="btn btn-secondary">سجل كمالك حضانة</button>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="carousel-item">
              <div class="hero-image d-block w-100" style="background-image: url('your-image-2.jpg'); height: 100vh; background-size: cover;">
                  <div class="overlay">
                      <div class="hero-content text-center">
                          <h1>كن جزءًا من مجتمعنا</h1>
                          <div class="mt-3">
                              <button class="btn btn-primary">تعرف على المزيد</button>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="carousel-item">
              <div class="hero-image d-block w-100" style="background-image: url('your-image-3.jpg'); height: 100vh; background-size: cover;">
                  <div class="overlay">
                      <div class="hero-content text-center">
                          <h1>ابدأ رحلتك معنا</h1>
                          <div class="mt-3">
                              <button class="btn btn-primary">ابدأ الآن</button>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">السابق</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">التالي</span>
      </a>
  </div>
</section>

{% endblock %}

{% block content %}
<section class="stats-section">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h5>أكثر من {{nurseries_count}} حضانة !</h5>
            </div>
            <div class="col-md-4">
                <h5>أكثر من {{cities_count}} مدينة !</h5>
            </div>
            <div class="col-md-4">
                <h5>أكثر من {{parents_count}} مستخدم !</h5>
            </div>
        </div>
    </div>
</section>

<section class="nursery-section">
    <h1>حضاناتنا</h1>
    <br>
    <p> حيث نضمن لكم جودة ومصداقية كل الحضانات المعروضة. نحرص دائماً على أن تكون الحضانات المدرجة في موقعنا مفحوصة ومؤكدة، لنوفر للأهالي بيئة آمنة ومحفزة لأطفالهم. الاختيار من بين حضاناتنا يعني الاطمئنان على مستقبل أطفالكم بين يدي أفضل المتخصصين في رعاية الطفولة المبكرة.</p>
    <br>
    <div class="container-fluid">
        <div class="row mt-4">
            {% for nursery in nurseries %}
            <div class="col-md-4 col-sm-6 mb-4">
                <div class="card shadow-lg rounded-card">
                    <div class="card-body">
                        <h5 class="card-title mb-3">
                            <div class="gallery-container">
                                <div class="gallery-item">
                                    <img src="{{ nursery.main_image.url }} " alt="Gallery image" class="responsive-img mb-4">


                            </div>
                            <a class="align-items-start" href="{%url 'nurseries:nursery_detail' nursery.id %}">{{ nursery.name }}</a>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-patch-check" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0"/>
                                <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z"/>
                            </svg>
                        </h5>
                        <div class="container">
                            <div class="row align-items-center mb-4">
                                <div class="col-auto d-flex align-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt" viewBox="0 0 16 16">
                                        <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A32 32 0 0 1 8 14.58a32 32 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10"/>
                                        <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                                    </svg>
                                    <h6 class="mb-0 mx-2">{{ nursery.neighborhood }}</h6>
                                </div>
                                <div class="col-auto d-flex align-items-center">
                                    <span class="material-symbols-outlined">child_care</span>

                                    <span>{{ nursery.min_display }} - {{ nursery.max_display }}</span>
                                </div>
                                {% if nursery.accepts_special_needs %}
                                <div class="col-auto">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-wheelchair" viewBox="0 0 16 16">
                                        <path d="M12 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m-.663 2.146a1.5 1.5 0 0 0-.47-2.115l-2.5-1.508a1.5 1.5 0 0 0-1.676.086l-2.329 1.75a.866.866 0 0 0 1.051 1.375L7.361 3.37l.922.71-2.038 2.445A4.73 4.73 0 0 0 2.628 7.67l1.064 1.065a3.25 3.25 0 0 1 4.574 4.574l1.064 1.063a4.73 4.73 0 0 0 1.09-3.998l1.043-.292-.187 2.991a.872.872 0 1 0 1.741.098l.206-4.121A1 1 0 0 0 12.224 8h-2.79zM3.023 9.48a3.25 3.25 0 0 0 4.496 4.496l1.077 1.077a4.75 4.75 0 0 1-6.65-6.65z"/>
                                    </svg>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <br>
        <a class="mt-4" href="{% url 'nurseries:nurseries_list' %}"><h3>أكتشف المزيد</h3></a>
    </div>
</section>
{% endblock %}

{% block reviews %}
<section class="reviews-section">
    <div class="wave-top"></div>
    {% if reviews %}
    <h3 class="py-5 mb-5 mt-5" style="text-align: center; margin-top: 5rem;">آراء أولياء الأمور</h3>
    <div class="row justify-content-center align-items-center">
        <div class="col-auto">
            <a class="mb-3" href="#reviewCarousel" role="button" data-bs-slide="prev">
                <svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"/>
                </svg>
            </a>
        </div>
        <div class="col-lg-8">
            <div id="reviewCarousel" class="carousel slide">
                <div class="carousel-inner">
                    {% for review in reviews %}
                    {% if forloop.counter0|divisibleby:3 %}
                    <div class="carousel-item {% if forloop.counter0 == 0 %}active{% endif %}">
                        <div class="container">
                            <div class="row">
                                {% endif %}
                                <div class="col-md-4 col-sm-6 mb-4">
                                    <div class="card rounded-card">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-md-start">
                                                <h3 class="mb-1">{{ review.parent.user.first_name }} {{ review.parent.user.last_name }}</h3>
                                            </div>
                                            <div class="d-flex mt-2">
                                                {% if review.rating == 1 %}
                                                <span class="material-symbols-outlined">star</span>
                                                {% elif review.rating == 2 %}
                                                <span class="material-symbols-outlined">star</span>
                                                <span class="material-symbols-outlined">star</span>
                                                {% elif review.rating == 3 %}
                                                <span class="material-symbols-outlined">star</span>
                                                <span class="material-symbols-outlined">star</span>
                                                <span class="material-symbols-outlined">star</span>
                                                {% elif review.rating == 4 %}
                                                <span class="material-symbols-outlined">star</span>
                                                <span class="material-symbols-outlined">star</span>
                                                <span class="material-symbols-outlined">star</span>
                                                <span class="material-symbols-outlined">star</span>
                                                {% elif review.rating == 5 %}
                                                <span class="material-symbols-outlined">star</span>
                                                <span class="material-symbols-outlined">star</span>
                                                <span class="material-symbols-outlined">star</span>
                                                <span class="material-symbols-outlined">star</span>
                                                <span class="material-symbols-outlined">star</span>
                                                {% endif %}
                                            </div>
                                            <h5 class="card-title mb-1">
                                                <br>
                                                <span class="text-muted"> {{ review.comment }} </span>
                                            </h5>
                                        </div>
                                    </div>
                                </div>
                                {% if forloop.counter|divisibleby:3 or forloop.last %}
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="col-auto">
            <a class="mb-3" href="#reviewCarousel" role="button" data-bs-slide="next">
                <svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"/>
                </svg>
            </a>
        </div>
    </div>
    {% else %}
    <h3 class="py-5 mt-5" style="text-align: center;">كن أول من يعبر عن رأيه!</h3>
    {% endif %}
    {% if request.user.is_authenticated %}
    {% if not request.user.is_superuser and not request.user.is_staff %}
    <!-- Display the form for regular authenticated users -->
    <h4 class="py-3 mt-5 mb-5" style="text-align: center;">عبر عن رأيك</h4>
    <form method="post" action="{% url 'main:add_review' %}" style="display: flex; flex-direction: column; align-items: center; max-width: 500px; margin: auto;">
        {% csrf_token %}
        <textarea class="form-control" name="comment" required minlength="3" placeholder="..." style="margin-bottom: 10px;"></textarea>
        <select class="form-select" name="rating" required>
            <option value="">تقييمك</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <input type="submit" class="btn" value="أضف تعليقك" style="margin-top: 10px;background-color: #FFFFFF; box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1);"/>
    </form>
    {% else %}
    <!-- Message for admins and staff -->
    <div class="p-3 mt-4 d-flex flex-column gap-2" style="text-align: center;">
        <h5 style="color: #FFFFFF;">فقط اولياء الامور يملكون صلاحية التعليق</h5>
    </div>
    {% endif %}
    {% else %}
    <!-- Message for non-authenticated users -->
    <div class="p-3 mt-4 d-flex flex-column gap-2" style="text-align: center;">
        <h5 style="color: #FFFFFF;">فقط المسجلون يملكون صلاحية التعليق</h5>
    </div>
    <div></div>
    {% endif %}
    <br><br>
    <div class="wave-bottom-p"></div>
</section>
{% endblock %}
